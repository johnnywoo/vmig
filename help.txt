Migrations config is read from '.vmig.cnf', which is searched in current
working directory and its parents.

Note: you should not symlink vmig executable into your PATH, because it calls
vmig.php relative to its own position and therefore link would not work.
Instead, you should either make an alias or a proxy script with absolute path.

Usage: vmig [options] command

Options:

  --config=file
    Use this file as config instead of searching for .vmig.cnf.

  --connection=mysql://user:pass@host:port
    MySQL connection. If not given, default parameters are read from mysql
    console client (essentially from ~/.my.cnf). You may review them by running
    'mysql --print-defaults'.

  --databases='dbname dbname dbname'
    List of database names which are watched for migrations.

  --fail-on-down
    Makes vmig fail whenever it has to roll a migration down. Useful in
    production environment.

  --migrations-path=path
    Path to migrations folder.

  --migrations-table=dbname.tblname
    Table name for migration data. The table will be created if not exists;
    database must exist.

  --no-color
    No color in the output.

  --schemes-path=path
    Path to schemes folder.

Commands:

  diff [-r, --reverse]
    Compares dump and database, exits with status 1 if changes present;
    prints found differences as SQL (commands to convert dumped scheme into
    actual).
    Options:
      --reverse   Invert diff direction; print commands to convert actual scheme
                  into dumped.

  status
    Shows database changes and out-of-sync migrations in human-readable format.
    Install Console_Color package from PEAR to get colored output.

  migrate
    Migrates the database to current version (as defined by migration files).
    1. Finds applied migrations that are not present in filesystem, runs them
    down.
    2. Finds non-applied migrations, runs them up.

  create [-f, --force] [-A, --no-approve] [name]
    Creates a new migration by comparing dump and database. The migration is
    placed in migrations_path from the config and also printed to stdout.
    If dump and database are equal, the empty migration is not created.
    If 'name' is given, it is used as a name for the migration. Otherwise
    current git branch name is used (except for master).
    After being created, the migration is approved.
    Options:
      --force       Create an empty migration even if no changes were found.
      --no-approve  If set, the migration will not be auto-approved. You
                    have to run "vmig approve" after that.

  reset [db1[.table1] [db2 ...]]
    Alters database to structure from dump.
    You can tell vmig what to reset by setting db1, db2 etc.

  approve [filename ...]
    Marks migrations as applied without actually running them.
    If filenames are not given, all existing migrations will be marked.
    In this case database schemes will be dumped.

  up   [-f, --from-file | -d, --from-db] [-n, --no-execute] filename [filename ...]
  down [-f, --from-file | -d, --from-db] [-n, --no-execute] filename [filename ...]
    Apply or rollback one migration. If migration with given filename exists
    both in db and file, you need to specify source with one of parameters;
    otherwise parameter is optional.
    Options:
      --from-file   Use migration from filesystem.
      --from-db     Use migration from database.
      --no-execute  Do not execute any SQL, only manage approved status

  help
    This message.

  init
    Places default .vmig.cnf in current working directory.
